<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="系统级计数器vmstat查看整个机器的CPU,内存,IO的使用情况, 如间隔2秒采集3次1234567891011121314151617181920212223242526272829303132333435363738394041424352_zjdev[/data01/zjgrp/zjdev]%vmstat 2 3procs -----------memory---------- ---sw">
<meta name="keywords" content="linux c++">
<meta property="og:type" content="article">
<meta property="og:title" content="linux 常用命令">
<meta property="og:url" content="http://yoursite.com/2018/10/24/linux-常用命令/index.html">
<meta property="og:site_name" content="扫地小道童">
<meta property="og:description" content="系统级计数器vmstat查看整个机器的CPU,内存,IO的使用情况, 如间隔2秒采集3次1234567891011121314151617181920212223242526272829303132333435363738394041424352_zjdev[/data01/zjgrp/zjdev]%vmstat 2 3procs -----------memory---------- ---sw">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-02-21T03:11:46.188Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux 常用命令">
<meta name="twitter:description" content="系统级计数器vmstat查看整个机器的CPU,内存,IO的使用情况, 如间隔2秒采集3次1234567891011121314151617181920212223242526272829303132333435363738394041424352_zjdev[/data01/zjgrp/zjdev]%vmstat 2 3procs -----------memory---------- ---sw">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/10/24/linux-常用命令/"/>





  <title>linux 常用命令 | 扫地小道童</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">扫地小道童</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/24/linux-常用命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="扫地小道童">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="扫地小道童">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">linux 常用命令</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-24T15:41:49+08:00">
                2018-10-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/10/24/linux-常用命令/" class="leancloud_visitors" data-flag-title="linux 常用命令">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="系统级计数器"><a href="#系统级计数器" class="headerlink" title="系统级计数器"></a>系统级计数器</h1><h2 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h2><p>查看整个机器的CPU,内存,IO的使用情况, 如间隔2秒采集3次<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">52_zjdev[/data01/zjgrp/zjdev]%vmstat 2 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io----       -system--   ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache        si   so    bi    bo        in   cs     us sy id wa st</span><br><span class="line"> 0  0 2103292 2772856 570784 44911892    0    0     11    314    0   0           22  4 73  1  0</span><br><span class="line"> 8  0 2103292 2772972 570784 44912092    0    0     0     66   45187 109175       2  3 94  0  0</span><br><span class="line"> 6  0 2103292 2772476 570784 44912340    0    0     0     500  41664 105258       2  3 94  1  0</span><br><span class="line"></span><br><span class="line">进程：</span><br><span class="line">r 运行队列(CPU正在执行或正在等待CPU的进程数)</span><br><span class="line">b 阻塞进程,等待IO的进程数量(不可中断)</span><br><span class="line"></span><br><span class="line">内存：</span><br><span class="line">swpd 虚拟内存已使用大小, 如果swpd的值不为0，但是SI，SO的值长期为0，这种情况不会影响系统性能</span><br><span class="line">free 空闲物理内存大小</span><br><span class="line">buff Linux/Unix系统是用来存储，目录里面有什么内容，权限等的缓存，我本机大概占用500多M</span><br><span class="line">cache cache直接用来记忆我们打开的文件,给文件做缓冲(Linux/Unix的聪明之处，把空闲的物理内存  </span><br><span class="line">的一部分拿来做文件和目录的缓存，是为了提高 程序执行的性能，当程序使用内存时，buffer/cached会很快地被使用)</span><br><span class="line"></span><br><span class="line">Swap：</span><br><span class="line">si: 每秒从交换区写到内存的大小，由磁盘调入内存</span><br><span class="line">so: 每秒写入交换区的内存大小，由内存调入磁盘</span><br><span class="line">注意：内存够用的时候，这2个值都是0，如果这2个值长期大于0时，系统性能会受到影响，磁盘IO和CPU资源  </span><br><span class="line">都会被消耗。有些朋友看到空闲内存（free）很少的或接近于0时，就认为内存不够用了，不能光看这一点，  </span><br><span class="line">还要结合si和so，如果free很少，但是si和so也很少（大多时候是0），那么不用担心，系统性能这时不会  </span><br><span class="line">受到影响的</span><br><span class="line"></span><br><span class="line">IO(现在的Linux版本块的大小为1kb):</span><br><span class="line">bi: 块设备每秒接收的块数量，这里的块设备是指系统上所有的磁盘和其他块设备，默认块大小是1024byte</span><br><span class="line">bo: 每秒写入的块数</span><br><span class="line">随机磁盘读写的时候，这2个值越大（如超出1024k)，能看到CPU在IO等待的值也会越大</span><br><span class="line"></span><br><span class="line">system(系统):</span><br><span class="line">in: 每秒中断数，包括时钟中断</span><br><span class="line">cs: 每秒上下文切换数</span><br><span class="line">上面2个值越大，会看到由内核消耗的CPU时间会越大</span><br><span class="line"></span><br><span class="line">CPU(以百分比表示):</span><br><span class="line">us: 用户进程执行时间百分比(us的值比较高时，说明用户进程消耗的CPU时间多，但是如果长期超50%的使用，  </span><br><span class="line">那么我们就该考虑优化程序算法或者进行加速)</span><br><span class="line">sy: 内核系统进程执行时间百分比(sy的值高时，说明系统内核消耗的CPU资源多，这并不是良性表现，我们应该检查原因)</span><br><span class="line">id: 空闲时间百分比</span><br><span class="line">wa: IO等待时间百分比(wa的值高时，说明IO等待比较严重，这可能由于磁盘大量作随机访问造成，也有可能磁盘出现瓶颈,块操作)</span><br><span class="line">st:</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h2><p>查看磁盘I/O使用和CPU情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@zhangbb ~]# iostat -d vda 3 3</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/08/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">vda               0.36         0.07         3.26    1000024   46518530</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">vda               1.01         0.00         4.04          0         12</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">vda               0.67         0.00        20.20          0         60</span><br><span class="line"></span><br><span class="line">tps：该设备每秒的传输次数&quot;一次传输&quot;意思是&quot;一次I/O请求&quot;。多个逻辑请求可能会被合并为&quot;一次I/O请求&quot;。&quot;一次传输&quot;请求的大小是未知的。</span><br><span class="line"></span><br><span class="line">kB_read/s：每秒从设备（drive expressed）读取的数据量</span><br><span class="line">kB_wrtn/s：每秒向设备（drive expressed）写入的数据量</span><br><span class="line">kB_read：读取的总数据量</span><br><span class="line">kB_wrtn：写入的总数量数据量；这些单位都为Kilobytes</span><br><span class="line"></span><br><span class="line">-x：显示扩展状态</span><br><span class="line">[root@zhangbb ~]# iostat -d -x 1 3</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/08/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.00     0.44    0.00    0.35     0.07     3.26    18.71     0.00    0.40    1.34    0.39   0.21   0.01</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">vda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00</span><br><span class="line"></span><br><span class="line">&gt; rrqm/s: 每秒对该设备的读请求被合并次数，文件系统会对读取同块(block)的请求进行合并</span><br><span class="line">&gt; wrqm/s: 每秒对该设备的写请求被合并次数</span><br><span class="line">&gt; r/s: 每秒完成的读次数</span><br><span class="line">&gt; w/s: 每秒完成的写次数</span><br><span class="line">&gt; rkB/s: 每秒读数据量(kB为单位)</span><br><span class="line">&gt; wkB/s: 每秒写数据量(kB为单位)</span><br><span class="line">&gt; avgrq-sz:平均每次IO操作的数据量(扇区数为单位)</span><br><span class="line">&gt; avgqu-sz: 平均等待处理的IO请求队列长度</span><br><span class="line">&gt; await: 平均每次IO请求等待时间(包括等待时间和处理时间，毫秒为单位)</span><br><span class="line">&gt; svctm: 平均每次IO请求的处理时间(毫秒为单位)</span><br><span class="line">&gt; %util: 采用周期内用于IO操作的时间比率，即IO队列非空的时间比率</span><br><span class="line">util = (r/s+w/s) * (svctm/1000)</span><br></pre></td></tr></table></figure></p>
<h2 id="mpstat"><a href="#mpstat" class="headerlink" title="mpstat"></a>mpstat</h2><p>每个CPU的使用情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">从/proc/stat获得数据</span><br><span class="line">[root@zhangbb ~]# mpstat 3 5</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/08/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">03:18:09 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">03:18:12 PM  all    0.00    0.00    0.00    0.00    0.00    0.00    0.33    0.00    0.00   99.67</span><br><span class="line">03:18:15 PM  all    0.34    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.66</span><br><span class="line">03:18:18 PM  all    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span><br><span class="line">03:18:21 PM  all    0.33    0.00    0.33    0.00    0.00    0.00    0.33    0.00    0.00   99.00</span><br><span class="line">03:18:24 PM  all    0.00    0.00    0.00    0.00    0.00    0.00    0.34    0.00    0.00   99.66</span><br><span class="line">Average:     all    0.13    0.00    0.07    0.00    0.00    0.00    0.20    0.00    0.00   99.60</span><br><span class="line"></span><br><span class="line">CPU 处理器ID</span><br><span class="line">user   在时间段里，用户态的CPU时间(%)，不包含 nice值为负 进程 (usr/total)*100  </span><br><span class="line">nice   在时间段里，nice值为负进程的CPU时间(%)   (nice/total)*100  </span><br><span class="line">system 在时间段里，核心时间(%)   (system/total)*100</span><br><span class="line">iowait 在时间段里，硬盘IO等待时间(%) (iowait/total)*100</span><br><span class="line">irq    在时间段里，硬中断时间(%)      (irq/total)*100</span><br><span class="line">soft   在时间段里，软中断时间(%)    (softirq/total)*100</span><br><span class="line">idle   在时间段里，CPU除去等待磁盘IO操作外的因为任何原因而空闲的时间闲置时间(%)(idle/total)*100</span><br><span class="line">intr/s 在时间段里，每秒CPU接收的中断的次数intr/total)*100</span><br></pre></td></tr></table></figure></p>
<h2 id="free"><a href="#free" class="headerlink" title="free"></a>free</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">52_zjdev[/data01/zjgrp/zjdev]%free -h</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:           63G        61G       1.8G        21G       567M        43G</span><br><span class="line">-/+ buffers/cache:        17G        45G</span><br><span class="line">Swap:         2.0G       2.0G        32K</span><br><span class="line"></span><br><span class="line">(-buffers/cache) used内存数：第一部分Mem行中的 used – buffers – cached</span><br><span class="line">(+buffers/cache) free内存数: 第一部分Mem行中的 free + buffers + cached</span><br><span class="line">可见-buffers/cache反映的是被程序实实在在吃掉的内存，而+buffers/cache反映的是可以挪用的内存总数</span><br></pre></td></tr></table></figure>
<h2 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sar -u 1 2 //体CPU使用统计</span><br><span class="line">sar -P ALL 1 1 //各个CPU使用统计</span><br><span class="line">sar -r  1 2 //内存使用情况统计</span><br><span class="line">sar -b 1 2 //整体I/O情况</span><br><span class="line">sar -d -p 1 1 //各个I/O设备情况</span><br><span class="line">sar -n DEV 1 1 //网络统计</span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# sar -n DEV 1 1</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/08/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">07:59:15 PM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</span><br><span class="line">07:59:16 PM      eth0      6.12      5.10      0.59      0.95      0.00      0.00      0.00</span><br><span class="line">07:59:16 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">07:59:16 PM   ip_vti0      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">07:59:16 PM   docker0      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">IFACE: 网络接口名称</span><br><span class="line">rxpck/s: 每秒收包的数量</span><br><span class="line">txpck/s: 每秒发包的数量</span><br><span class="line">rxkB/s: 每秒收的数据量(kB为单位)</span><br><span class="line">txkB/s: 每秒发的数据量(kB为单位)</span><br><span class="line"></span><br><span class="line">sar日志保存(-o)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="进程级计数器"><a href="#进程级计数器" class="headerlink" title="进程级计数器"></a>进程级计数器</h1><h2 id="top"><a href="#top" class="headerlink" title="top"></a>top</h2><p>按一个统计数据排序，显示排名高的进程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">52_zjdev[/data01/zjgrp/zjdev]%top -u zjv8cs -d 3</span><br><span class="line">top - 14:16:50 up 168 days, 17:39, 34 users,  load average: 0.95, 0.74, 0.66</span><br><span class="line">Tasks: 418 total,   1 running, 417 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s): 22.1 us,  3.3 sy,  0.0 ni, 73.6 id,  0.7 wa,  0.0 hi,  0.3 si,  0.0 st</span><br><span class="line">KiB Mem:  66109508 total, 65616660 used,   492848 free,   321260 buffers</span><br><span class="line">KiB Swap:  2103292 total,  2103292 used,        0 free. 47138260 cached Mem</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                  </span><br><span class="line"> 3869 zjv8cs    20   0 26.460g 504060  16484 S 6.250 0.762 124:55.11 sframe                                                   </span><br><span class="line"> 6343 zjv8cs    20   0 19.333g 332120   7328 S 0.000 0.502  20:45.48 java                                                     </span><br><span class="line"> 6369 zjv8cs    20   0 2921872 224360  26232 S 0.000 0.339  77:42.57 odframe                                                  </span><br><span class="line"> 6480 zjv8cs    20   0 23.116g 102460  90296 S 0.000 0.155   1:11.94 sframe                                                   </span><br><span class="line"> 6482 zjv8cs    20   0 23.064g  27784  16352 S 0.000 0.042   1:09.05 sframe                                                   </span><br><span class="line"> 6484 zjv8cs    20   0 23.062g  28872  15584 S 0.000 0.044   1:08.88 sframe                                                   </span><br><span class="line"> 6503 zjv8cs    20   0 23.116g  59680  47540 S 0.000 0.090   1:10.93 sframe                                                   </span><br><span class="line"> 6511 zjv8cs    20   0 23.119g 358908 336920 S 0.000 0.543   1:22.49 sframe                                                   </span><br><span class="line"> 6520 zjv8cs    20   0 23.116g 1.069g 1.056g S 0.000 1.696   1:45.00 sframe                                                   </span><br><span class="line"> 6536 zjv8cs    20   0 23.066g  27624  15596 S 0.000 0.042   1:09.88 sframe                                                   </span><br><span class="line"> 6543 zjv8cs    20   0 23.288g 2.963g 2.820g S 0.000 4.700   3:10.91 sframe                                                   </span><br><span class="line"> 6552 zjv8cs    20   0 23.118g 369656 356788 S 0.000 0.559   1:22.45 sframe                                                   </span><br><span class="line"> 6554 zjv8cs    20   0 23.116g  29924  17728 S 0.000 0.045   1:11.02 sframe                                                   </span><br><span class="line"> 6567 zjv8cs    20   0 23.061g  26992  15396 S 0.000 0.041   1:09.80 sframe                                                   </span><br><span class="line"> 7061 zjv8cs    20   0   31968   1244    736 S 0.000 0.002   0:01.24 systemd                                                  </span><br><span class="line"> 7062 zjv8cs    20   0   63640     40      0 S 0.000 0.000   0:00.00 (sd-pam)                                                 </span><br><span class="line"> 7492 zjv8cs    20   0 24.637g  62640   7180 S 0.000 0.095  38:41.25 sframe                                                   </span><br><span class="line"> 8069 zjv8cs    20   0 23.476g  30552  17872 S 0.000 0.046   9:14.04 odframe                                                  </span><br><span class="line"> 8101 zjv8cs    20   0 23.116g  89672  77504 S 0.000 0.136   1:13.43 sframe                                                   </span><br><span class="line"> 8156 zjv8cs    20   0 24.643g  68264   6964 S 0.000 0.103  34:18.32 sframe                                                   </span><br><span class="line"> 8683 zjv8cs    20   0 23.136g  18508   8916 S 0.000 0.028   1:04.60 sframe                                                   </span><br><span class="line">14603 zjv8cs    20   0 23.003g  28440  16644 S 0.000 0.043   0:24.28 sframe                                                   </span><br><span class="line">14838 zjv8cs    20   0 25.779g 437940  21188 S 0.000 0.662 124:05.00 sframe                                                   </span><br><span class="line">17791 zjv8cs    20   0   87688   1800    904 S 0.000 0.003   0:00.03 sshd                                                     </span><br><span class="line">17792 zjv8cs    20   0   16824   3376   1452 S 0.000 0.005   0:00.15 csh</span><br><span class="line"></span><br><span class="line">上半部分：</span><br><span class="line">top一行：从左到右依次为当前系统时间，系统运行的时间，系统在之前1min、5min和15min内cpu的平均负载值</span><br><span class="line">Tasks一行：该行给出进程整体的统计信息，包括统计周期内进程总数、运行状态进程数、休眠状态进程数、停止状态进程数和僵死状态进程数</span><br><span class="line">Cpu(s)一行：cpu整体统计信息，包括用户态下进程、系统态下进程占用cpu时间比，nice值大于0的进程在用户态下占用cpu时间比，cpu处于idle状态、wait状态的时间比，以及处理硬中断、软中断的时间比</span><br><span class="line">Mem一行：该行提供了内存统计信息，包括物理内存总量、已用内存、空闲内存以及用作缓冲区的内存量</span><br><span class="line">Swap一行：虚存统计信息，包括交换空间总量、已用交换区大小、空闲交换区大小以及用作缓存的交换空间大小</span><br><span class="line"></span><br><span class="line">下半部：</span><br><span class="line">PID: 进程pid</span><br><span class="line">USER: 拉起进程的用户</span><br><span class="line">PR: 该列值加100为进程优先级，若优先级小于100，则该进程为实时(real-time)进程，  </span><br><span class="line">否则为普通(normal)进程，实时进程的优先级更高，更容易获得cpu调度，以上输出结果中，  </span><br><span class="line">java进程优先级为120，是普通进程，had进程优先级为2，为实时进程，migration 进程的优先级RT对应于0，为最高优先级</span><br><span class="line">NI: 进程的nice优先级值，该列中，实时进程的nice值为0，普通进程的nice值范围为-20~19</span><br><span class="line">VIRT: 进程所占虚拟内存大小（默认单位kB）</span><br><span class="line">RES: 进程所占物理内存大小（默认单位kB）</span><br><span class="line">SHR: 进程所占共享内存大小（默认单位kB）</span><br><span class="line">S: 进程的运行状态</span><br><span class="line">%CPU: 采样周期内进程所占cpu百分比(-d 3)</span><br><span class="line">%MEM: 采样周期内进程所占内存百分比</span><br><span class="line">TIME+: 进程使用的cpu时间总计</span><br><span class="line">COMMAND: 拉起进程的命令</span><br><span class="line"></span><br><span class="line"># 可以按照不同的指标排序显示，按对应键即可</span><br><span class="line"># P 按照 CPU 使用率排序</span><br><span class="line"># T 按照 MITE+ 排序</span><br><span class="line"># M 按内存使用占比排序</span><br><span class="line"># 按”d”可以更新top更新频率, 按空格键可以手动更新输出</span><br><span class="line"># 按”c”快捷键，将显示命令的全路径以及命令参数</span><br><span class="line"># 按”k”快捷键，可向指定进程发送信号，默认信号为SIGTERM，该信号可中止进程</span><br><span class="line"># 按”r”快捷键，可以修改指定进程的nice优先级</span><br></pre></td></tr></table></figure></p>
<h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@zhangbb ~]# ps -o pid,ppid,lwp,comm</span><br><span class="line">  PID  PPID   LWP COMMAND</span><br><span class="line"> 4981  4975  4981 bash</span><br><span class="line"> 7792  4981  7792 ps</span><br><span class="line"> </span><br><span class="line">进程状态，显示进程的各种统计信息，包括内存和CPU的使用</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs/sqlite&gt; ps -eLo pid,lwp,pcpu | grep 12567</span><br><span class="line">12567 12567  0.0</span><br><span class="line">12567 12568  0.0</span><br><span class="line">12567 12569  0.0</span><br><span class="line">12567 12575  0.0</span><br><span class="line">12567 12576  0.0</span><br><span class="line">12567 12577  0.0</span><br><span class="line">12567 12579  0.0</span><br><span class="line"></span><br><span class="line">linux上进程有5种状态: </span><br><span class="line">1. 运行(正在运行或在运行队列中等待) </span><br><span class="line">2. 中断(休眠中, 受阻, 在等待某个条件的形成或接受到信号) </span><br><span class="line">3. 不可中断(收到信号不唤醒和不可运行, 进程必须等待直到有中断发生) </span><br><span class="line">4. 僵死(进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放) </span><br><span class="line">5. 停止(进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行) </span><br><span class="line"></span><br><span class="line">ps工具标识进程的5种状态码: </span><br><span class="line">D 不可中断 uninterruptible sleep (usually IO) </span><br><span class="line">R 运行 runnable (on run queue) </span><br><span class="line">S 中断 sleeping </span><br><span class="line">T 停止 traced or stopped </span><br><span class="line">Z 僵死 a defunct (”zombie”) process </span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# ps aux</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.0  0.4  54384  4916 ?        Ss    2018  85:05 /usr/lib/systemd/systemd --system --deserialize 22</span><br><span class="line">root         2  0.0  0.0      0     0 ?        S     2018   0:03 [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0 ?        S     2018   3:55 [ksoftirqd/0]</span><br><span class="line">root         5  0.0  0.0      0     0 ?        S&lt;    2018   0:00 [kworker/0:0H]</span><br><span class="line"></span><br><span class="line">TTY ：该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?， </span><br><span class="line">另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序</span><br></pre></td></tr></table></figure>
<h2 id="pmap"><a href="#pmap" class="headerlink" title="pmap"></a>pmap</h2><p>将进程的内存和使用统计一起列出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; pmap -d 6480</span><br><span class="line">START               SIZE     RSS     PSS   DIRTY    SWAP PERM OFFSET           DEVICE MAPPING</span><br><span class="line">0000000000400000     28K     24K      1K      0K      0K r-xp 0000000000000000 fd:00  /data01/zjgrp/zjdev/ob_rel/bin/sframe.2.3.0.811124</span><br><span class="line">0000000000606000      4K      4K      4K      4K      0K r--p 0000000000006000 fd:00  /data01/zjgrp/zjdev/ob_rel/bin/sframe.2.3.0.811124</span><br><span class="line">0000000000607000      4K      4K      4K      4K      0K rw-p 0000000000007000 fd:00  /data01/zjgrp/zjdev/ob_rel/bin/sframe.2.3.0.811124</span><br><span class="line">0000000000fbf000    596K    532K    532K    532K      0K rw-p 0000000000000000 00:00  [heap]</span><br><span class="line">0000000001054000   2420K   1980K   1980K   1980K      0K rw-p 0000000000000000 00:00  [heap]</span><br><span class="line">00002ac54f4c6000    132K     96K      0K      0K      0K r-xp 0000000000000000 00:23  /lib64/ld-2.19.so</span><br><span class="line">...</span><br><span class="line">00007f4300ffe000 768064K  72592K  72527K  72592K      0K r--s 0000000000000000 00:05  /SYSV0108cd26</span><br><span class="line">00007f432fe0e000  67528K     12K      0K     12K      0K r--s 0000000000000000 00:05  /SYSV0108ccd5</span><br><span class="line">00007fff0738e000    136K    108K    108K    108K      0K rw-p 0000000000000000 00:00  [stack]</span><br><span class="line">00007fff073b6000      8K      4K      0K      0K      0K r-xp 0000000000000000 00:00  [vdso]</span><br><span class="line">ffffffffff600000      4K      0K      0K      0K      0K r-xp 0000000000000000 00:00  [vsyscall]</span><br><span class="line">Total:           24239152K 102676K  85374K  84936K      0K</span><br><span class="line"></span><br><span class="line">49996K writable-private, 1075844K readonly-private, 23113312K shared, and 98852K referenced </span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# pmap -d 1663</span><br><span class="line">1663:   /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/usr/local/mysql/var/zhangbb.err --open-files-limit=65535 --pid-file=/usr/local/mysql/var/zhangbb.pid --socket=/tmp/mysql.sock --port=3306</span><br><span class="line">Address           Kbytes Mode  Offset           Device    Mapping</span><br><span class="line">0000000000400000    8852 r-x-- 0000000000000000 0fd:00001 mysqld</span><br><span class="line">0000000000ea5000       8 r---- 00000000008a5000 0fd:00001 mysqld</span><br><span class="line">0000000000ea7000     660 rw--- 00000000008a7000 0fd:00001 mysqld</span><br><span class="line">0000000000f4c000     160 rw--- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">0000000001f85000   24832 rw--- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">......</span><br><span class="line">00007f0bd867b000       4 rw--- 0000000000022000 0fd:00001 ld-2.17.so</span><br><span class="line">00007f0bd867c000       4 rw--- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">00007ffc301f0000     132 rw--- 0000000000000000 000:00000   [ stack ]</span><br><span class="line">00007ffc3025b000       8 r-x-- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">ffffffffff600000       4 r-x-- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">mapped: 434848K    writeable/private: 204948K    shared: 0K</span><br><span class="line"></span><br><span class="line">mapped 表示该进程映射的虚拟地址空间大小，也就是该进程预先分配的虚拟内存大小，即ps出的vsz</span><br><span class="line">writeable/private  表示进程所占用的私有地址空间大小，也就是该进程实际使用的内存大小     </span><br><span class="line">shared 表示进程和其他进程共享的内存大小</span><br></pre></td></tr></table></figure></p>
<h2 id="iotop"><a href="#iotop" class="headerlink" title="iotop"></a>iotop</h2><p>进程的I/O速度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@zhangbb ~]# iotop -p 29215</span><br><span class="line">Total DISK READ :       0.00 B/s | Total DISK WRITE :       0.00 B/s</span><br><span class="line">Actual DISK READ:       0.00 B/s | Actual DISK WRITE:       0.00 B/s</span><br><span class="line">  TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO&gt;    COMMAND                                        </span><br><span class="line">29215 be/4 root        0.00 B/s    0.00 B/s  ?unavailable?  docker-containerd -l uni~him --runtime docker</span><br><span class="line"></span><br><span class="line">左右箭头：改变排序方式，默认是按IO排序。</span><br><span class="line">r：改变排序顺序。</span><br><span class="line">o：只显示有IO输出的进程。</span><br><span class="line">p：进程/线程的显示方式的切换。</span><br><span class="line">a：显示累积使用量。</span><br><span class="line">q：退出。</span><br></pre></td></tr></table></figure></p>
<h2 id="pidstat"><a href="#pidstat" class="headerlink" title="pidstat"></a>pidstat</h2><p>查看进程I/O , 内存, CPU<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"># cpu使用情况统计(-u)</span><br><span class="line"># 使用-u选项，pidstat将显示各活动进程的cpu使用统计，执行”pidstat -u”与单独执行”pidstat”的效果一样</span><br><span class="line">[root@zhangbb ~]# pidstat</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/09/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">03:11:40 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command</span><br><span class="line">03:11:40 PM     0         1    0.01    0.02    0.00    0.03     0  systemd</span><br><span class="line">03:11:40 PM     0         2    0.00    0.00    0.00    0.00     0  kthreadd</span><br><span class="line">03:11:40 PM     0         3    0.00    0.00    0.00    0.00     0  ksoftirqd/0</span><br><span class="line">03:11:40 PM     0         9    0.00    0.01    0.00    0.01     0  rcu_sched</span><br><span class="line"></span><br><span class="line">03:11:40: pidstat获取信息时间点</span><br><span class="line">PID: 进程pid</span><br><span class="line">%usr: 进程在用户态运行所占cpu时间比率</span><br><span class="line">%system: 进程在内核态运行所占cpu时间比率</span><br><span class="line">%CPU: 进程运行所占cpu时间比率</span><br><span class="line">CPU: 指示进程在哪个核运行</span><br><span class="line">Command: 拉起进程对应的命令</span><br><span class="line"></span><br><span class="line"># 内存使用情况统计(-r)</span><br><span class="line">[root@zhangbb ~]# pidstat -r -p 31846</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/14/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">02:46:04 PM   UID       PID  minflt/s  majflt/s     VSZ    RSS   %MEM  Command</span><br><span class="line">02:46:04 PM     0     31846      0.00      0.00  216704   2924   0.29  osqueryd</span><br><span class="line"></span><br><span class="line">minflt/s: 每秒次缺页错误次数(minor page faults)，次缺页错误次数意即虚拟内存地址映射成物理内存地址产生的page fault次数</span><br><span class="line">majflt/s: 每秒主缺页错误次数(major page faults)，当虚拟内存地址映射成物理内存地址时，相应的page在swap中，这样的page fault为major page fault，一般在内存使用紧张时产生</span><br><span class="line">VSZ: 该进程使用的虚拟内存(以kB为单位)</span><br><span class="line">RSS: 该进程使用的物理内存(以kB为单位)</span><br><span class="line">%MEM: 该进程使用内存的百分比</span><br><span class="line">Command: 拉起进程对应的命令</span><br><span class="line"></span><br><span class="line"># IO情况统计(-d)</span><br><span class="line">[root@zhangbb ~]# pidstat -d 1 2</span><br><span class="line">Linux 3.10.0-693.11.6.el7.x86_64 (zhangbb)      01/14/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">02:47:23 PM   UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command</span><br><span class="line"></span><br><span class="line">02:47:24 PM   UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command</span><br><span class="line"></span><br><span class="line">Average:      UID       PID   kB_rd/s   kB_wr/s kB_ccwr/s  Command</span><br><span class="line"></span><br><span class="line">kB_rd/s: 每秒进程从磁盘读取的数据量(以kB为单位)</span><br><span class="line">kB_wr/s: 每秒进程向磁盘写的数据量(以kB为单位)</span><br><span class="line">Command: 拉起进程对应的命令</span><br><span class="line"></span><br><span class="line"># 针对特定进程统计(-p)</span><br><span class="line"></span><br><span class="line">pidstat -T CHILD -C mysql // 显示所有mysql服务器的子进程</span><br><span class="line">pidstat -urd -h // 将所有的统计数据结合到一个便于阅读的单一报告中</span><br></pre></td></tr></table></figure></p>
<h2 id="fuser"><a href="#fuser" class="headerlink" title="fuser"></a>fuser</h2><p><a href="https://www.cnblogs.com/bangerlee/tag/linux/" target="_blank" rel="noopener">常用命令</a><br>查询给定文件或目录的用户或进程信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@zhangbb ~]# fuser -v /root</span><br><span class="line">                     USER        PID ACCESS COMMAND</span><br><span class="line">/root:               root       7944 ..c.. bash</span><br><span class="line">                     root       9847 ..c.. bash</span><br><span class="line">                     root      25352 ..c.. bash</span><br><span class="line">					 </span><br><span class="line">PID后跟的字符说明了进程以何种方式与该目录/文件关联，有以下关联方式：</span><br><span class="line">　　c  指示进程的工作目录</span><br><span class="line">　　e  指示该文件为进程的可执行文件(即进程由该文件拉起)</span><br><span class="line">　　f  指示该文件被进程打开，默认情况下f字符不显示</span><br><span class="line">　　F  指示该文件被进程打开进行写入，默认情况下F字符不显示</span><br><span class="line">　　r  指示该目录为进程的根目录</span><br><span class="line">　　m  指示进程使用该文件进行内存映射，抑或该文件为共享库文件，被进程映射进内存</span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# fuser -v -n tcp 3306</span><br><span class="line">                     USER        PID ACCESS COMMAND</span><br><span class="line">3306/tcp:            mysql      1663 F.... mysqld</span><br><span class="line">查询socket 端口占用进程</span><br><span class="line"></span><br><span class="line">fuser -v -k mysqld</span><br><span class="line">关闭进程</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="网络工具"><a href="#网络工具" class="headerlink" title="网络工具"></a>网络工具</h1><h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">netstat -a     #列出所有端口</span><br><span class="line">netstat -at    #列出所有tcp端口</span><br><span class="line">netstat -au    #列出所有udp端口  </span><br><span class="line"></span><br><span class="line">netstat -l        #只显示监听端口</span><br><span class="line">netstat -lt       #只列出所有监听 tcp 端口</span><br><span class="line">netstat -lu       #只列出所有监听 udp 端口</span><br><span class="line"></span><br><span class="line">netstat -pt    #显示 PID 和进程名称</span><br><span class="line">netstat -n     #显示IP</span><br><span class="line">netstat -c   #每隔一秒输出网络信息</span><br></pre></td></tr></table></figure>
<h2 id="ss"><a href="#ss" class="headerlink" title="ss"></a>ss</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">比netstat 效率高, 可以用time来比较</span><br><span class="line">-a, --all            display all sockets</span><br><span class="line">-l, --listening      display listening sockets</span><br><span class="line">-p, --processes      show process using socket</span><br><span class="line">-s, --summary        show socket usage summary</span><br><span class="line">-t, --tcp            display only TCP sockets</span><br><span class="line">-u, --udp            display only UDP sockets</span><br><span class="line"></span><br><span class="line">#列出来至120.33.31.1,80端口的连接</span><br><span class="line">ss src 120.33.31.1:http</span><br><span class="line">ss src 120.33.31.1:80</span><br><span class="line"></span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ss -s</span><br><span class="line">Total: 2701 (kernel 0)</span><br><span class="line">TCP:   2018 (estab 785, closed 1049, orphaned 0, synrecv 0, timewait 16/0), ports 0</span><br><span class="line"></span><br><span class="line">Transport Total     IP        IPv6</span><br><span class="line">*         0         -         -        </span><br><span class="line">RAW       0         0         0        </span><br><span class="line">UDP       1         1         0        </span><br><span class="line">TCP       969       831       138      </span><br><span class="line">INET      970       832       138      </span><br><span class="line">FRAG      0         0         0</span><br></pre></td></tr></table></figure>
<h2 id="iftop"><a href="#iftop" class="headerlink" title="iftop"></a>iftop</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">用来监控网卡的实时流量（可以指定网段）、反向解析IP、显示端口信息等</span><br><span class="line"></span><br><span class="line">                      12.5Kb                25.0Kb                37.5Kb                50.0Kb          62.5Kb</span><br><span class="line">+---------------------+---------------------+---------------------+---------------------+---------------------</span><br><span class="line">45.32.49.180.vultr.com                    =&gt; 218.205.54.1                              6.88Kb  5.00Kb  5.00Kb</span><br><span class="line">                                          &lt;=                                            528b    424b    424b </span><br><span class="line">45.32.49.180.vultr.com                    =&gt; 108.61.10.10.choopa.net                    472b   2.36Kb  2.36Kb</span><br><span class="line">                                          &lt;=                                              0b   2.80Kb  2.80Kb</span><br><span class="line">zhangbb                                   =&gt; 2605:a000:1620:43be:bc3d:cf55:9cc5:c949   1.67Kb   856b    856b </span><br><span class="line">                                          &lt;=                                            608b    304b    304b</span><br><span class="line">zhangbb                                   =&gt; 2605:a000:1102:c230:b272:bfff:fe82:223f      0b    856b    856b</span><br><span class="line">                                          &lt;=                                              0b    304b    304b</span><br><span class="line">zhangbb                                   =&gt; 2001:b011:200b:1d2c:cdd3:eb53:ee38:be79   1.63Kb   834b    834b</span><br><span class="line">                                          &lt;=                                            584b    292b    292b</span><br><span class="line">zhangbb                                   =&gt; 2001:e68:541b:b09:ddb2:79ab:d9f2:a2fb     1.63Kb   834b    834b</span><br><span class="line">                                          &lt;=                                            584b    292b    292b</span><br><span class="line">45.32.49.180.vultr.com                    =&gt; 212.92.105.127                             640b    320b    320b</span><br><span class="line">                                          &lt;=                                            528b    264b    264b</span><br><span class="line">45.32.49.180.vultr.com                    =&gt; 188.168.215.41                               0b    308b    308b</span><br><span class="line">                                          &lt;=                                              0b    252b    252b</span><br><span class="line">45.32.49.180.vultr.com                    =&gt; m5673.contaboserver.net                      0b    306b    306b</span><br><span class="line">                                          &lt;=                                              0b    250b    250b</span><br><span class="line">45.32.49.180.vultr.com                    =&gt; ip-187-44-249-173.static.contabo.net         0b    302b    302b</span><br><span class="line">                                          &lt;=                                              0b    246b    246b</span><br><span class="line">zhangbb                                   =&gt; 2a01:c50f:8c01:2700:8cfe:47e7:f6f3:41c       0b    202b    202b</span><br><span class="line">                                          &lt;=                                              0b    238b    238b</span><br><span class="line">zhangbb                                   =&gt; 2400:2412:8720:2800:7603:bdff:fe96:676b    424b    212b    212b</span><br><span class="line">                                          &lt;=                                            388b    194b    194b</span><br><span class="line">zhangbb                                   =&gt; 2607:5300:60:5e6e::33c:e975                424b    212b    212b</span><br><span class="line">                                          &lt;=                                            388b    194b    194b</span><br><span class="line">zhangbb                                   =&gt; 240d:1a:700:e900:211:32ff:fe69:b9be          0b    194b    194b</span><br><span class="line">                                          &lt;=                                              0b    212b    212b</span><br><span class="line">--------------------------------------------------------------------------------------------------------------</span><br><span class="line">TX:             cum:   6.56KB   peak:   14.4Kb                                rates:   14.4Kb  13.1Kb  13.1Kb</span><br><span class="line">RX:                    3.19KB           9.05Kb                                         3.71Kb  6.38Kb  6.38Kb</span><br><span class="line">TOTAL:                 9.76KB           20.9Kb                                         18.1Kb  19.5Kb  19.5Kb</span><br><span class="line"></span><br><span class="line">TX：发送流量</span><br><span class="line">RX：接收流量</span><br><span class="line">TOTAL：总流量</span><br><span class="line">Cumm：运行iftop到目前时间的总流量</span><br><span class="line">peak：流量峰值</span><br><span class="line">rates：分别表示过去 2s 10s 40s 的平均流量</span><br></pre></td></tr></table></figure>
<h2 id="nethogs"><a href="#nethogs" class="headerlink" title="nethogs"></a>nethogs</h2><p>一个小型的net top工具, 按进程或程序实时统计网络带宽使用率<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@zhangbb ~]# nethogs</span><br><span class="line">Ethernet link detected</span><br><span class="line">                      Waiting for first packet to arrive (see sourceforge.net bug 1019381)</span><br><span class="line">NetHogs version 0.8.5</span><br><span class="line"></span><br><span class="line">    PID USER     PROGRAM                                                  DEV        SENT      RECEIVED       </span><br><span class="line">   2790 root     sshd: root@pts/0,pts/1                                   eth0        1.419       0.555 KB/sec</span><br><span class="line">      ? root     unknown TCP                                                          0.000       0.000 KB/sec</span><br><span class="line"></span><br><span class="line">  TOTAL                                                                               1.419       0.555 KB/sec</span><br><span class="line"></span><br><span class="line">m : Cycle between display modes (kb/s, kb, b, mb) 切换网速显示单位</span><br><span class="line">r : Sort by received. 按接收流量排序</span><br><span class="line">s : Sort by sent. 按发送流量排序</span><br><span class="line">q : Quit and return to the shell prompt. 退出NetHogs命令工具</span><br></pre></td></tr></table></figure></p>
<h2 id="tpcdump"><a href="#tpcdump" class="headerlink" title="tpcdump"></a>tpcdump</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 监视指定网络接口的数据包</span><br><span class="line">tcpdump -i eth1</span><br><span class="line">// 截获主机210.27.48.1 和主机210.27.48.2 或210.27.48.3的通信</span><br><span class="line">tcpdump host 210.27.48.1 and \ (210.27.48.2 or 210.27.48.3 \) </span><br><span class="line">// 取主机210.27.48.1除了和主机210.27.48.2之外所有主机通信的ip包</span><br><span class="line">tcpdump ip host 210.27.48.1 and ! 210.27.48.2</span><br><span class="line">// 截获主机hostname发送的所有数据</span><br><span class="line">tcpdump -i eth0 src host hostname</span><br><span class="line">// 监视所有送到主机hostname的数据包</span><br><span class="line">tcpdump -i eth0 dst host hostname</span><br><span class="line"></span><br><span class="line">// 监视指定主机和端口的数据包</span><br><span class="line">tcpdump tcp port 23 and host 210.27.48.1</span><br><span class="line">tcpdump udp port 123 </span><br><span class="line"></span><br><span class="line">// 监视指定协议的数据包</span><br><span class="line">// 打印TCP会话中的的开始和结束数据包, 并且数据包的源或目的不是本地网络上的主机.</span><br><span class="line">tcpdump &apos;tcp[tcpflags] &amp; (tcp-syn|tcp-fin) != 0 and not src and dst net localnet&apos;</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">// 保存到文件用wireshark分析</span><br><span class="line">tcpdump tcp -i eth1 -t -s 0 -c 100 and dst port ! 22 and src net 192.168.1.0/24 -w ./target.cap</span><br><span class="line">(1)tcp: ip icmp arp rarp 和 tcp、udp、icmp这些选项等都要放到第一个参数的位置，用来过滤数据报的类型</span><br><span class="line">(2)-i eth1 : 只抓经过接口eth1的包</span><br><span class="line">(3)-t : 不显示时间戳</span><br><span class="line">(4)-s 0 : 抓取数据包时默认抓取长度为68字节。加上-S 0 后可以抓到完整的数据包</span><br><span class="line">(5)-c 100 : 只抓取100个数据包</span><br><span class="line">(6)dst port ! 22 : 不抓取目标端口是22的数据包</span><br><span class="line">(7)src net 192.168.1.0/24 : 数据包的源网络地址为192.168.1.0/24</span><br><span class="line">(8)-w ./target.cap : 保存成cap文件，方便用ethereal(即wireshark)分析</span><br></pre></td></tr></table></figure>
<p><a href="https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html" target="_blank" rel="noopener">Linux tcpdump命令详解</a></p>
<hr>
<h1 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h1><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><p>使用 tar 命令只要记得参数是[必选+自选+f]:<br>必选：</p>
<ol>
<li>-c 意为 create，表示创建压缩包</li>
<li>-x 意为 extract，表示解压</li>
<li>-t 表示查看内容</li>
<li>-r 给压缩包追加文件</li>
<li>-u 意为 update，更新压缩包中的文件</li>
</ol>
<p>自选：</p>
<ol>
<li>-z 使用 gzip 属性</li>
<li>-j 使用 bz2 属性</li>
<li>-Z 使用 compress 属性</li>
<li>-v 意为 verbose，显示详细的操作过程</li>
<li>-O 将文件输出到标准输出</li>
</ol>
<p>遇到不同类型的文件，请用不同的套路来应对：</p>
<blockquote>
<p><em>.tar -&gt; tar -xf
</em>.tar.gz -&gt; tar -xzf<br><em>.tar.bz2 -&gt; tar -xjf
</em>.tar.Z -&gt; tar -xZf<br><em>.gz -&gt; gzip -d
</em>.rar -&gt; unrar e<br>*.zip -&gt; unzip</p>
</blockquote>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 找出七天前的文件</span><br><span class="line"># / 表示从根目录中查找</span><br><span class="line"># -type f 表示找出系统普通文件，不包含目录</span><br><span class="line"># -mtime +n 表示寻找 n 天前的数据</span><br><span class="line"># -print 打印文件名称</span><br><span class="line">find / -type f -mtime +7 -print</span><br><span class="line"></span><br><span class="line"># 找出并删除七天前的文件</span><br><span class="line">find /temp/ -type f -mtime +7 -print -exec rm -f &#123;&#125; \;</span><br><span class="line"># -exec 表示后面执行系统命令</span><br><span class="line"># &#123;&#125; 只有该符号能跟在命令你后面</span><br><span class="line"># \; 结束符号</span><br><span class="line">find /temp/ -type f -mtime +7 -print | xargs rm -f</span><br><span class="line"># 使用管道和 xargs = -exec</span><br><span class="line"></span><br><span class="line"># 查找 /var 下最大的十个文件</span><br><span class="line">find /var -type f -ls | sort -k 7 -r -n | head</span><br><span class="line"></span><br><span class="line"># 查找 /var/log 下大于 5GB 的文件</span><br><span class="line">find /var/log/ -type f -size +5120M -exec ls -lh &#123;&#125; \;</span><br><span class="line"></span><br><span class="line"># 找出今天所有文件并将它们拷贝到另一个目录</span><br><span class="line">find . -ctime 0 -print -exec cp &#123;&#125; /mnt/backup/&#123;&#125; \;</span><br><span class="line"></span><br><span class="line"># 找出2天内的修改文件, 删除前询问</span><br><span class="line">find /var/log -type f -mtime -2 -ok rm &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">#-cmin +10: 在10分钟前被修改过的</span><br></pre></td></tr></table></figure>
<h2 id="du"><a href="#du" class="headerlink" title="du"></a>du</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#显示当前文件下 Top 10 空间占用的文件/目录，</span><br><span class="line">#s 表示不显示每个子目录或文件的大小</span><br><span class="line">#h 表示用更加自然的方式显示（比如 K/M/G 这样）</span><br><span class="line">du -sh * | sort -nr | head</span><br></pre></td></tr></table></figure>
<h2 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h2><p>测试磁盘读写速度, 备份或恢复磁盘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">b=512, c=1, k=1024, w=2, xm=number m  指定数字的地方若以下列字符结尾乘以相应的数字</span><br><span class="line">if=file 输入文件名，缺省为标准输入</span><br><span class="line">of=file 输出文件名，缺省为标准输出</span><br><span class="line">ibs=bytes 一次读入 bytes 个字节(即一个块大小为 bytes 个字节</span><br><span class="line">obs=bytes 一次写 bytes 个字节(即一个块大小为 bytes 个字节</span><br><span class="line">bs=bytes 同时设置读写块的大小为 bytes ，可代替 ibs 和 obs</span><br><span class="line">cbs=bytes 一次转换 bytes 个字节，即转换缓冲区大小</span><br><span class="line">skip=blocks 从输入文件开头跳过 blocks 个块后再开始复制</span><br><span class="line">seek=blocks 从输出文件开头跳过 blocks 个块后再开始复制</span><br><span class="line">count=blocks 仅拷贝 blocks 个块，块大小等于 ibs 指定的字节数</span><br><span class="line">应用：</span><br><span class="line">// 将/dev/hdx全盘数据备份到指定路径的image文件</span><br><span class="line">dd if=/dev/hdx of=/path/to/image</span><br><span class="line">// 备份/dev/hdx全盘数据，并利用gzip工具进行压缩，保存到指定路径</span><br><span class="line">dd if=/dev/hdx | gzip &gt;/path/to/image.gz</span><br><span class="line"></span><br><span class="line">// 拷贝内存资料到硬盘, 将内存里的数据拷贝到root目录下的mem.bin文件</span><br><span class="line">dd if=/dev/mem of=/root/mem.bin bs=1024</span><br><span class="line">// 从光盘拷贝iso镜像, 从光盘拷贝iso镜像</span><br><span class="line">dd if=/dev/cdrom of=/root/cd.iso</span><br><span class="line">// 备份文件恢复到指定盘</span><br><span class="line">dd if=/path/to/image of=/dev/hdx</span><br><span class="line">gzip -dc /path/to/image.gz | dd of=/dev/hdx</span><br><span class="line">// 备份MBR</span><br><span class="line">dd if=/dev/hdx of=/path/to/image count=1 bs=512</span><br><span class="line">// 将内存里的数据拷贝到root目录下的mem.bin文件</span><br><span class="line">dd if=/dev/mem of=/root/mem.bin bs=1024</span><br><span class="line">// 拷贝光盘数据到root文件夹下，并保存为cd.iso文件</span><br><span class="line">dd if=/dev/cdrom of=/root/cd.iso</span><br><span class="line">// 利用随机的数据填充硬盘，在某些必要的场合可以用来销毁数据</span><br><span class="line">dd if=/dev/urandom of=/dev/hda1</span><br><span class="line"></span><br><span class="line">// 得到最恰当的block size</span><br><span class="line">dd if=/dev/zero bs=1024 count=1000000 of=/root/1Gb.file</span><br><span class="line">dd if=/dev/zero bs=2048 count=500000 of=/root/1Gb.file</span><br><span class="line">dd if=/dev/zero bs=4096 count=250000 of=/root/1Gb.file      </span><br><span class="line">dd if=/dev/zero bs=8192 count=125000 of=/root/1Gb.file</span><br><span class="line">// 测试硬盘读写速度</span><br><span class="line">dd if=/root/1Gb.file bs=64k | dd of=/dev/null</span><br><span class="line">dd if=/dev/zero of=/root/1Gb.file bs=1024 count=1000000</span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# dd if=/dev/zero bs=1024 count=1000000 of=/root/1Gb.file</span><br><span class="line">1000000+0 records in</span><br><span class="line">1000000+0 records out</span><br><span class="line">1024000000 bytes (1.0 GB) copied, 4.31042 s, 238 MB/s</span><br><span class="line">[root@zhangbb ~]# dd if=/root/1Gb.file bs=64k | dd of=/dev/null</span><br><span class="line">15625+0 records in</span><br><span class="line">15625+0 records out</span><br><span class="line">1024000000 bytes (1.0 GB) copied2000000+0 records in</span><br><span class="line">2000000+0 records out</span><br><span class="line">1024000000 bytes (1.0 GB) copied, 3.08384 s, 332 MB/s, 3.08522 s, 332 MB/s</span><br></pre></td></tr></table></figure></p>
<h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 查看进程打开文件</span><br><span class="line">lsof -p pid</span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# lsof -p `pgrep pritunl-web`</span><br><span class="line">COMMAND     PID USER   FD      TYPE   DEVICE SIZE/OFF     NODE NAME</span><br><span class="line">pritunl-w 28661 root  cwd       DIR    253,1     4096        2 /</span><br><span class="line">pritunl-w 28661 root  rtd       DIR    253,1     4096        2 /</span><br><span class="line">pritunl-w 28661 root  txt       REG    253,1 13205960    46464 /usr/bin/pritunl-web</span><br><span class="line">pritunl-w 28661 root  mem       REG    253,1  2151672     4698 /usr/lib64/libc-2.17.so</span><br><span class="line">pritunl-w 28661 root  mem       REG    253,1   141968     4724 /usr/lib64/libpthread-2.17.so</span><br><span class="line">pritunl-w 28661 root  mem       REG    253,1   163400     4690 /usr/lib64/ld-2.17.so</span><br><span class="line">pritunl-w 28661 root    0r      CHR      1,3      0t0     4856 /dev/null</span><br><span class="line">pritunl-w 28661 root    1w     FIFO      0,8      0t0 62148038 pipe</span><br><span class="line">pritunl-w 28661 root    2w     FIFO      0,8      0t0 62148039 pipe</span><br><span class="line">pritunl-w 28661 root    3w      REG    253,1      141    46468 /var/log/pritunl.log</span><br><span class="line">pritunl-w 28661 root    4u     IPv6 62148054      0t0      TCP *:https (LISTEN)</span><br><span class="line">pritunl-w 28661 root    5u  a_inode      0,9        0     4852 [eventpoll]</span><br><span class="line">pritunl-w 28661 root   10r     FIFO      0,8      0t0 62147876 pipe</span><br><span class="line">pritunl-w 28661 root   11r      CHR      1,9      0t0     4861 /dev/urandom</span><br><span class="line">pritunl-w 28661 root   12w      CHR      1,3      0t0     4856 /dev/null</span><br><span class="line">pritunl-w 28661 root   13w     FIFO      0,8      0t0 62147876 pipe</span><br><span class="line">pritunl-w 28661 root   14u     sock      0,7      0t0 62147877 protocol: NETLINK</span><br></pre></td></tr></table></figure>
<h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><h2 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h2><h2 id="ipcs"><a href="#ipcs" class="headerlink" title="ipcs"></a>ipcs</h2><p>用于显示进程间通信信息的命令，其可列出进程间的共享内存、消息队列、信号信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"># </span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -a</span><br><span class="line"></span><br><span class="line">--------- 消息队列 -----------</span><br><span class="line">键         msqid      拥有者     权限       已用字节数   消息        </span><br><span class="line">0x0000bff0 688128     zjv8cs2    666        0            0           </span><br><span class="line">0x000cd141 1605633    zjdev      666        0            0           </span><br><span class="line"></span><br><span class="line">------------ 共享内存段 --------------</span><br><span class="line">键         shmid      拥有者     权限       字节       连接数     状态        </span><br><span class="line">0x0100cd0c 55115778   zjv8cs     666        1761104    44                      </span><br><span class="line">0x0108ccd5 55148547   zjv8cs     666        69145336   21                      </span><br><span class="line">0x0108cd26 55181317   zjv8cs     666        786497536  21                                                              </span><br><span class="line">0x0108ca0b 55214104   zjv8cs     666        786497536  21                                                        </span><br><span class="line">0x0108ca30 55246915   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108ca3c 55279684   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108cbe2 55312453   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108cd4a 55345222   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108ce69 55377991   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108cf7d 55410760   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d3ea 55443529   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f2 55476298   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f3 55509067   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f4 55541836   zjv8cs     666        786497536  21                                    </span><br><span class="line">                               </span><br><span class="line">0x0108d4f5 55574627   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f6 55607396   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f7 55640165   zjv8cs     666        786497536  21                                         </span><br><span class="line">0x0108d4f8 55672946   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4f9 55705715   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4fa 55738484   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4fb 55771253   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4fc 55804022   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4fd 55836791   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4fe 55869560   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d4ff 55902329   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d500 55935098   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d501 55967867   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d502 56000636   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d503 56033405   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d504 56066174   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d505 56098943   zjv8cs     666        786497536  21                      </span><br><span class="line">0x0108d506 56131712   zjv8cs     666        786497536  21                                       </span><br><span class="line"></span><br><span class="line">--------- 信号量数组 -----------</span><br><span class="line">键         semid      拥有者     权限       nsems     </span><br><span class="line">0x0108cd24 3571715    zjv8cs     666        100         </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看ipc限制</span><br><span class="line"># -m选项单独列出共享内存信息，-s选项单独列出信号信息，-q选项单独列出消息队列信息</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -m -l</span><br><span class="line"></span><br><span class="line">---------- 同享内存限制 ------------</span><br><span class="line">最大段数 = 4096</span><br><span class="line">最大段大小 (千字节) = 18014398509481983</span><br><span class="line">最大总共享内存 (千字节) = 18014398509480960</span><br><span class="line">最小段大小 (字节) = 1</span><br><span class="line"></span><br><span class="line"># 显示ipc信息详情</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -m -i 55115778</span><br><span class="line"></span><br><span class="line">共享内存段 shmid=55115778</span><br><span class="line">uid=1002        gid=1002        cuid=1002       cgid=100</span><br><span class="line">模式=0666       访问权限=0666</span><br><span class="line">字节数=1761104  lpid=7279       cpid=6369       nattch=48</span><br><span class="line">附加时间=Wed Jan 16 11:38:29 2019  </span><br><span class="line">脱离时间=Wed Jan 16 11:38:29 2019  </span><br><span class="line">更改时间=Wed Jan  2 10:09:05 2019  </span><br><span class="line"></span><br><span class="line"># 显示ipc创建者与拥有者详情</span><br><span class="line"></span><br><span class="line"># 显示最近访问ipc的进程pid</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -m -p </span><br><span class="line"></span><br><span class="line">-------- 共享内存 创建者/上次修改者 PID ----------</span><br><span class="line">shmid      拥有者     cpid       lpid      </span><br><span class="line">0          zjdev      3140       3783      </span><br><span class="line">6979585    zjcccs     20087      3047      </span><br><span class="line">55115778   zjv8cs     6369       8573      </span><br><span class="line">55148547   zjv8cs     6367       9191      </span><br><span class="line"></span><br><span class="line"># 显示最近访问时间点</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -s -t</span><br><span class="line"></span><br><span class="line">------------ 信号量 操作/更改 时间 -------------</span><br><span class="line">semid    拥有者     上一操作                   上次更改                  </span><br><span class="line">3538944  zjv8cs2     Wed Jan 16 14:00:16 2019   Wed Jan 16 13:15:46 2019  </span><br><span class="line">524289   zjcccs      Mon Nov 19 14:29:06 2018   Thu Jul 26 17:01:22 2018  </span><br><span class="line">393218   zjdev       Tue Jan  8 16:21:57 2019   Thu Nov 15 18:00:31 2018  </span><br><span class="line">3571715  zjv8cs      Wed Jan 16 14:00:15 2019   Wed Jan  2 10:25:00 2019  </span><br><span class="line">589828   zjv5cs      Wed Jan  9 10:57:59 2019   Thu Jul 26 20:42:16 2018  </span><br><span class="line">950277   zjcccs2     Sun Jan 13 17:08:26 2019   Tue Aug  7 15:35:27 2018  </span><br><span class="line">2228230  zjdev       Thu Oct 25 11:40:30 2018   Thu Oct 25 11:39:07 2018  </span><br><span class="line">2031623  zjcccs3     Wed Jan 16 12:49:44 2019   Thu Sep 27 11:25:15 2018 </span><br><span class="line"></span><br><span class="line"># 显示当前使用状态</span><br><span class="line">host-10-19-14-51:/data01/zjgrp/zjv8cs&gt; ipcs -u</span><br><span class="line"></span><br><span class="line">---------- 消息状态 -----------</span><br><span class="line">已分配队列数 = 2</span><br><span class="line">已用消息头(header)数 = 0</span><br><span class="line">已用空间 = 0 字节</span><br><span class="line"></span><br><span class="line">---------- 共享内存状态 ------------</span><br><span class="line">段已分配 135</span><br><span class="line">页已分配 31145111</span><br><span class="line">页驻留  5595656</span><br><span class="line">页交换  108302</span><br><span class="line">交换性能：0 次尝试       0 次成功</span><br><span class="line"></span><br><span class="line">--------- 信号量状态 -----------</span><br><span class="line">已使用数组 = 8</span><br><span class="line">已分配信号量数 = 561</span><br><span class="line"></span><br><span class="line"># 删除</span><br><span class="line">ipcrm用法 </span><br><span class="line">ipcrm -M shmkey  移除用shmkey创建的共享内存段</span><br><span class="line">ipcrm -m shmid    移除用shmid标识的共享内存段</span><br><span class="line">ipcrm -Q msgkey  移除用msqkey创建的消息队列</span><br><span class="line">ipcrm -q msqid  移除用msqid标识的消息队列</span><br><span class="line">ipcrm -S semkey  移除用semkey创建的信号</span><br><span class="line">ipcrm -s semid  移除用semid标识的信号</span><br></pre></td></tr></table></figure>
<h2 id="tee"><a href="#tee" class="headerlink" title="tee"></a>tee</h2><p>tee命令用于将数据重定向到文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/yum.repos.d/mongodb-org-4.0.repo &lt;&lt; EOF</span><br><span class="line">[mongodb-org-4.0]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.0/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@zhangbb ~]# cat /etc/yum.repos.d/mongodb-org-4.0.repo</span><br><span class="line">[mongodb-org-4.0]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.0/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc</span><br></pre></td></tr></table></figure>
<h1 id="常用技巧："><a href="#常用技巧：" class="headerlink" title="常用技巧："></a>常用技巧：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">cat file1 file2 &gt;file3  #合并文件</span><br><span class="line">tac file #以行为单位，倒序显示</span><br><span class="line">head -n 100 file #显示file的前100行</span><br><span class="line">head -n -100 file #显示file的除最后100行以外的内容。  </span><br><span class="line">tail -100 file  #显示file最后100行内容</span><br><span class="line">tail -n +100 file  #从第100行开始显示file内容   </span><br><span class="line">sed -n &apos;1,100p&apos; file &gt; file2 #截取file中1到100行到file2</span><br><span class="line">sed -n &quot;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&quot; file #显示包含&quot;&amp;&amp;&amp;&amp;&amp;&quot;行</span><br><span class="line">sort/uniq #文本排序</span><br><span class="line">date +%s #将当前时间转成Unix时间戳</span><br><span class="line">date -d &apos;2013-2-22 22:14&apos; +%s #指定日期转成Unix时间戳</span><br><span class="line">date -d @1361542596 +&quot;%Y-%m-%d %H:%M:%S&quot; #指定格式输出</span><br><span class="line">grep &apos;aaa\|bbb&apos; file  #查询&amp;&amp;&amp;或$$$</span><br><span class="line">grep -v &apos;root&apos; file #查询不包含root的行</span><br><span class="line">ps -ef | grep gmake | grep –v root | awk &apos;&#123;print $2&#125;&apos; | xargs  kill -9 # 杀进程</span><br><span class="line">echo &quot;password&quot; | passwd testuser --stdin # linux用shell修改密码</span><br><span class="line">cut -d &quot; &quot; -f 2,3 1.txt # 用空格分隔, 显示第二、三个字段列</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Donate comment here</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.png" alt="扫地小道童 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="扫地小道童 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/24/Docker实践/" rel="next" title="Docker实践">
                <i class="fa fa-chevron-left"></i> Docker实践
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/24/RPC框架原理和实践/" rel="prev" title="RPC框架原理和实践">
                RPC框架原理和实践 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">扫地小道童</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">100</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#系统级计数器"><span class="nav-number">1.</span> <span class="nav-text">系统级计数器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#vmstat"><span class="nav-number">1.1.</span> <span class="nav-text">vmstat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iostat"><span class="nav-number">1.2.</span> <span class="nav-text">iostat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mpstat"><span class="nav-number">1.3.</span> <span class="nav-text">mpstat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#free"><span class="nav-number">1.4.</span> <span class="nav-text">free</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sar"><span class="nav-number">1.5.</span> <span class="nav-text">sar</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#进程级计数器"><span class="nav-number">2.</span> <span class="nav-text">进程级计数器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#top"><span class="nav-number">2.1.</span> <span class="nav-text">top</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ps"><span class="nav-number">2.2.</span> <span class="nav-text">ps</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pmap"><span class="nav-number">2.3.</span> <span class="nav-text">pmap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iotop"><span class="nav-number">2.4.</span> <span class="nav-text">iotop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pidstat"><span class="nav-number">2.5.</span> <span class="nav-text">pidstat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fuser"><span class="nav-number">2.6.</span> <span class="nav-text">fuser</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网络工具"><span class="nav-number">3.</span> <span class="nav-text">网络工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#netstat"><span class="nav-number">3.1.</span> <span class="nav-text">netstat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ss"><span class="nav-number">3.2.</span> <span class="nav-text">ss</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iftop"><span class="nav-number">3.3.</span> <span class="nav-text">iftop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nethogs"><span class="nav-number">3.4.</span> <span class="nav-text">nethogs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tpcdump"><span class="nav-number">3.5.</span> <span class="nav-text">tpcdump</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他命令"><span class="nav-number">4.</span> <span class="nav-text">其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#tar"><span class="nav-number">4.1.</span> <span class="nav-text">tar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find"><span class="nav-number">4.2.</span> <span class="nav-text">find</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#du"><span class="nav-number">4.3.</span> <span class="nav-text">du</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dd"><span class="nav-number">4.4.</span> <span class="nav-text">dd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lsof"><span class="nav-number">4.5.</span> <span class="nav-text">lsof</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#curl"><span class="nav-number">4.6.</span> <span class="nav-text">curl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iptables"><span class="nav-number">4.7.</span> <span class="nav-text">iptables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ipcs"><span class="nav-number">4.8.</span> <span class="nav-text">ipcs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tee"><span class="nav-number">4.9.</span> <span class="nav-text">tee</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常用技巧："><span class="nav-number">5.</span> <span class="nav-text">常用技巧：</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">扫地小道童</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("qtaCLPFG2dC4WHDCx7CXHF86-gzGzoHsz", "o0aO4phM2twpBXHNnXD4keF5");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  


  

  

  

</body>
</html>
